<!DOCTYPE html>
<html>
<head>
  <style>
    /* Previous styles remain the same until .card::before */
    .game-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 10px;
      font-family: Arial, sans-serif;
    }
    
    .settings {
      margin-bottom: 20px;
      padding: 15px;
      background: #f3f4f6;
      border-radius: 3px;
      display: grid;
      gap: 10px;
    }
    
    .settings select, .settings input {
      padding: 5px 10px;
      margin-left: 10px;
      border-radius: 2px;
      border: 1px solid #d1d5db;
    }
    
    .stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    
    .grid {
      display: grid;
      gap: 10px;
      margin: 0 auto;
    }
    
    .card {
      background: #2563eb;
      border-radius: 3px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s;
      position: relative;
    }

    /* Pattern styles */
    .card::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 3px;
      background-position: center;
      background-repeat: repeat;
    }

    /* Built-in patterns */
    .pattern-stripes::before {
      background-image: repeating-linear-gradient(
        45deg,
        #2563eb,
        #2563eb 10px,
        #1d4ed8 10px,
        #1d4ed8 20px
      );
    }

    .pattern-dots::before {
      background-image: radial-gradient(
        circle at 5px 5px,
        #1d4ed8 3px,
        #2563eb 3px
      );
      background-size: 20px 20px;
    }

    .pattern-chevron::before {
      background-image: 
        linear-gradient(45deg, #1d4ed8 25%, transparent 25%),
        linear-gradient(-45deg, #1d4ed8 25%, transparent 25%);
      background-size: 20px 20px;
      background-color: #2563eb;
    }

    .pattern-grid::before {
      background-image: 
        linear-gradient(#1d4ed8 2px, transparent 2px),
        linear-gradient(90deg, #1d4ed8 2px, transparent 2px);
      background-size: 20px 20px;
      background-color: #2563eb;
    }

    .pattern-custom::before {
      background-size: cover;
    }
    
    .card img {
      width: 97%;
      height: 97%;
      object-fit: contain;
      display: none;
      position: absolute;
    }
    
    .card.flipped {
      transform: rotateY(180deg);
      background: white;
      border: 2px solid #2563eb;
    }
    
    .card.flipped::before {
      display: none;
    }
    
    .card.flipped img {
      display: block;
    }
    
    .card.matched {
      background: #22c55e;
      border: 1px solid #22c55e;
    }

    .pattern-preview {
      display: inline-block;
      width: 40px;
      height: 40px;
      border-radius: 4px;
      margin-left: 10px;
      vertical-align: middle;
    }
    
    button {
      margin-top: 20px;
      padding: 10px 20px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    
    button:hover {
      background: #1d4ed8;
    }

    #preloader {
      display: none;
    }

    .custom-url-input {
      display: none;
    }

    .custom-url-input.visible {
      display: block;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <div class="settings">
      <label>Number of Pairs:
        <select id="pairCount" onchange="resetGame()">
          <option value="4">4 Pairs</option>
          <option value="6">6 Pairs</option>
          <option value="8" selected>8 Pairs</option>
          <option value="10">10 Pairs</option>
          <!-- <option value="12">12 Pairs</option> -->
        </select>
      </label>
      <label>Card Size (px):
        <input type="number" id="cardSize" value="200" min="80" max="200" step="20" onchange="updateCardSize()">
      </label>
      <label>Card Back Pattern:
        <select id="cardPattern" onchange="updateCardPattern()">
          <option value="pattern-stripes">Stripes</option>
          <option value="pattern-dots">Dots</option>
          <option value="pattern-chevron">Chevron</option>
          <option value="pattern-grid">Grid</option>
          <option value="pattern-custom">Custom Image</option>
        </select>
        <span id="patternPreview" class="pattern-preview pattern-stripes"></span>
      </label>
      <div id="customUrlInput" class="custom-url-input">
        <label>Custom Image URL:
          <input type="text" id="cardBack" placeholder="Enter image URL" onchange="updateCustomPattern()">
        </label>
      </div>
    </div>
    <div class="stats">
      <div>Moves: <span id="moves">0</span></div>
      <div>Matches: <span id="matches">0</span></div>
    </div>
    <div class="grid" id="grid"></div>
    <button onclick="resetGame()">New Game</button>
  </div>
  
  <div id="preloader"></div>

  <script>
    // Previous script remains the same until updateCardBack()
    const imageUrls = [
'images/liam1s.jpg',  // Replace with your image URL
'images/liam2s.jpg',  // Replace with your image URL
'images/liam3s.jpg',  // Replace with your image URL
'images/liam4s.jpg',  // Replace with your image URL
'images/liam5s.jpg',  // Replace with your image URL
'images/liam6s.jpg',  // Replace with your image URL
'images/liam7s.jpg',  // Replace with your image URL
'images/liam8s.jpg',  // Replace with your image URL
'images/liam9s.jpg',  // Replace with your image URL
'images/liam10s.jpg'  // Replace with your image URL
];
    
    let cards = [];
    let flippedCards = [];
    let matchedPairs = 0;
    let moves = 0;
    let preloadedImages = new Set();
    
    function updateCardPattern() {
      const pattern = document.getElementById('cardPattern').value;
      const customUrlInput = document.getElementById('customUrlInput');
      const preview = document.getElementById('patternPreview');
      
      // Update preview
      preview.className = 'pattern-preview ' + pattern;
      
      // Show/hide custom URL input
      customUrlInput.className = pattern === 'pattern-custom' ? 
        'custom-url-input visible' : 'custom-url-input';
      
      // Update cards
      const cards = document.querySelectorAll('.card');
      cards.forEach(card => {
        card.className = 'card ' + pattern;
      });
    }

    function updateCustomPattern() {
      const cardBackUrl = document.getElementById('cardBack').value;
      const style = document.createElement('style');
      style.textContent = `
        .pattern-custom::before {
          background-image: url('${cardBackUrl}');
        }
      `;
      document.head.appendChild(style);
    }

    // Rest of the previous functions remain the same
    function preloadImages(urls) {
      const preloader = document.getElementById('preloader');
      preloader.innerHTML = '';
      
      urls.forEach(url => {
        if (!preloadedImages.has(url)) {
          const img = new Image();
          img.src = url;
          preloader.appendChild(img);
          preloadedImages.add(url);
        }
      });
    }
    
    function updateCardSize() {
      const size = document.getElementById('cardSize').value;
      const cards = document.querySelectorAll('.card');
      cards.forEach(card => {
        card.style.width = `${size}px`;
        card.style.height = `${size}px`;
      });
    }
    
    function createCard(imageUrl) {
      const card = document.createElement('div');
      const pattern = document.getElementById('cardPattern').value;
      card.className = `card ${pattern}`;
      card.dataset.image = imageUrl;
      
      const size = document.getElementById('cardSize').value;
      card.style.width = `${size}px`;
      card.style.height = `${size}px`;
      
      const img = document.createElement('img');
      img.src = imageUrl;
      img.alt = 'Card Image';
      card.appendChild(img);
      
      card.addEventListener('click', flipCard);
      return card;
    }
    
    // Previous functions remain the same
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
    
    function getGridSize(pairCount) {
      const totalCards = pairCount * 2;
      if (totalCards <= 12) return 3;
      if (totalCards <= 20) return 4;
      return 5;
    }
    
    function initializeGame() {
      const pairCount = parseInt(document.getElementById('pairCount').value);
      const gameImages = imageUrls.slice(0, pairCount);
      
      preloadImages(gameImages);
      
      cards = shuffleArray([...gameImages, ...gameImages]);
      
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      
      const gridSize = getGridSize(pairCount);
      grid.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;
      
      cards.forEach(imageUrl => {
        const card = createCard(imageUrl);
        grid.appendChild(card);
      });
    }
    
    function flipCard() {
      if (
        flippedCards.length === 2 || 
        this.classList.contains('flipped') ||
        this.classList.contains('matched')
      ) {
        return;
      }
      
      this.classList.add('flipped');
      flippedCards.push(this);
      
      if (flippedCards.length === 2) {
        moves++;
        document.getElementById('moves').textContent = moves;
        checkMatch();
      }
    }
    
    function checkMatch() {
      const [card1, card2] = flippedCards;
      if (card1.dataset.image === card2.dataset.image) {
        card1.classList.add('matched');
        card2.classList.add('matched');
        matchedPairs++;
        document.getElementById('matches').textContent = matchedPairs;
        
        const pairCount = parseInt(document.getElementById('pairCount').value);
        if (matchedPairs === pairCount) {
          setTimeout(() => {
            alert(`Congratulations! You won in ${moves} moves!`);
          }, 500);
        }
      } else {
        setTimeout(() => {
          card1.classList.remove('flipped');
          card2.classList.remove('flipped');
        }, 1000);
      }
      flippedCards = [];
    }
    
    function resetGame() {
      moves = 0;
      matchedPairs = 0;
      flippedCards = [];
      document.getElementById('moves').textContent = moves;
      document.getElementById('matches').textContent = matchedPairs;
      initializeGame();
    }
    
    // Start the game
    initializeGame();
  </script>
</body>
</html>